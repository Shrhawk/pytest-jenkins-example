name: Run Google Login Using Selenium

on:
  workflow_dispatch:
    inputs:
        user_email:
          description: 'User Email'
          required: true
        user_password:
          description: 'User Password'
          required: true
        login_url:
          description: 'Login URL'
          required: true
        success_url:
          description: 'Success URL'
          required: true

jobs:
  google-auth-test:
    name: Google Auth Using Selenium
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v3
      - name: ⚠️ Hide Input Variables ⚠️
        uses: ./ 
        with:
          exclude_inputs: "user_email, user_password, login_url, success_url"
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.11"
          cache: "pip"
          cache-dependency-path: |
            requirements/requirements.txt
      - name: Instanll dev dependencies
        run: |
          pip install pip-tools==6.9.0
          pip-sync requirements/requirements.txt
      - name: Test Google Login Using Selenium
        run: |
          python main.py
        env:
          Login_URL: ${{ inputs.login_url }}
          USER_EMAIL: ${{ inputs.user_email }}
          USER_PASSWORD: ${{ inputs.user_password }}
          SUCCESS_URL: ${{ inputs.success_url }}
